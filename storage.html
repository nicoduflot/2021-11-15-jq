<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation HTML CSS3 JavaScript JQuery</title>
    <link rel="stylesheet" href="./css/style.css" media="screen" />
    <link rel="stylesheet" href="./css/all.css" />
    <script src="./js/script.js"></script>
    <script>
        loaded(function(){
            loadNav('body > nav');
            loadNav('body > footer > div nav.navFooter');
            
            let inputSessionUser = s('#sessionUser');
            let dataSessionUserName = s('#dataSessionUserName');
            let btnSessionUserName = s('#btnSession');
            /*
            if(userName = sessionStorage.getItem('sessionUserName')){
                dataSessionUserName.innerText = userName;
            }else{
                dataSessionUserName.innerText = 'Pas d\'utilisateur enregistré';
            }
            */
            //on peut écrire aussi : 

            dataSessionUserName.innerText = sessionStorage.getItem('sessionUserName') || 'Pas d\'utilisateur enregistré';
            
            btnSessionUserName.addEventListener('click', function(evenement){
                console.log(evenement);
                if(inputSessionUser.value !== ''){
                    console.log('Enregistrement en session du userName');
                    sessionStorage.setItem('sessionUserName', inputSessionUser.value);
                    dataSessionUserName.innerText = inputSessionUser.value;
                    inputSessionUser.value = '';
                    console.log(sessionStorage);
                }
            });
            
            s('#btnClearSessionUserName').addEventListener('click', function(){
                console.log(sessionStorage);
                console.log('Vider userName de la session');
                delete sessionStorage['sessionUserName'];
                console.log(sessionStorage);
            });

            s('#btnClearSession').addEventListener('click', function(){
                console.log(sessionStorage);
                console.log('Vider session');
                sessionStorage.clear();
                console.log(sessionStorage);
            });

            // localStorage 
            let inputLocalUser = s('#localUser');
            let dataLocalUserName = s('#dataLocalUserName');
            let btnLocalUserName = s('#btnLocal');

            dataLocalUserName.innerText = sessionStorage.getItem('localUserName') || 'Pas d\'utilisateur enregistré';
            
            btnLocalUserName.addEventListener('click', function(evenement){
                console.log(evenement);
                if(inputLocalUser.value !== ''){
                    console.log('Enregistrement en local du userName');
                    localStorage.setItem('localUserName', inputLocalUser.value);
                    dataLocalUserName.innerText = inputLocalUser.value;
                    inputLocalUser.value = '';
                    console.log(localStorage);
                }
            });
            
            s('#btnClearLocalUserName').addEventListener('click', function(){
                console.log(localStorage);
                console.log('Vider userName de la local');
                delete localStorage['localUserName'];
                console.log(localStorage);
            });

            s('#btnClearLocal').addEventListener('click', function(){
                console.log(localStorage);
                console.log('Vider local');
                localStorage.clear();
                console.log(localStorage);
            });

            // pour créer un cookie, il lui faut un nom, 
            // une date d'expiration, un chemin, un type d'accessibilité du cookie 
            // et si on utilise https ou pas pour la requête depuis des sites tiers
            // création dans script.js des fonctione de gestion de cookie
            /*
            let dateTest = new Date();
            console.log(dateTest);
            dateTest.setTime( dateTest.getTime() + ( 1 * 24 * 60 * 60 * 1000) + (60 * 60 * 1000));
            console.log(dateTest.toUTCString());
            */

            let inputCookieValue = s('#cookieValue');
            let cookieValueSpan = s('#cookieValueSpan');

            //btnCookie btnClearCookieValue btnDeleteCookie

            s('#btnCookie').addEventListener('click', function(){
                if(inputCookieValue !== ''){
                    setCookie('monCookie', inputCookieValue.value, 1);
                    inputCookieValue.value = '';
                    cookieValueSpan.innerText = getCookie('monCookie');
                    //console.log(document.cookie);
                }
            });

            s('#btnClearCookieValue').addEventListener('click', function(){
                setCookie('monCookie', '', 1);
                inputCookieValue.value = '';
                cookieValueSpan.innerText = getCookie('monCookie');
                //console.log(document.cookie);
            });

            s('#btnDeleteCookie').addEventListener('click', function(){
                setCookie('monCookie');
                inputCookieValue.value = '';
                cookieValueSpan.innerText = '';
                //console.log(document.cookie);
            });

        });
    </script>
</head>
<body>
    <header>
        <div class="header">
            <img src="./images/logo-batman.svg" alt="Logo batman SVG" class="logo" />
            <h1>Formation HTML - CSS</h1>
        </div>
    </header>
    <nav>
        
    </nav>
    <main>
        <section>
            <article>
                <header>
                    <h2>Le stockage des données en JS</h2>
                </header>
                <main>
                    <h3>sessionStorage</h3>
                    <p>
                        <label>UserName :</label>
                        <input type="text" id="sessionUser" value="" />
                    </p>
                    <p>
                        <button id="btnSession">
                            Save sessionUserName
                        </button>
                    </p>
                    <p>
                        <button id="btnClearSessionUserName">
                            Clear sessionUserName
                        </button>
                    </p>
                    <p>
                        <button id="btnClearSession">
                            Clear session
                        </button>
                    </p>
                    <p>
                        Actual sessionUserName : <span id="dataSessionUserName"></span>
                    </p>
                </main>
            </article>
            <article>
                <header>
                    <h2>Le stockage des données en JS</h2>
                </header>
                <main>
                    <h3>localStorage</h3>
                    <p>
                        <label>UserName :</label>
                        <input type="text" id="localUser" value="" />
                    </p>
                    <p>
                        <button id="btnLocal">
                            Save localUserName
                        </button>
                    </p>
                    <p>
                        <button id="btnClearLocalUserName">
                            Clear localUserName
                        </button>
                    </p>
                    <p>
                        <button id="btnClearLocal">
                            Clear local
                        </button>
                    </p>
                    <p>
                        Actual localUserName : <span id="dataLocalUserName"></span>
                    </p>
                </main>
            </article>
            <article>
                <header>
                    <h2>Le stockage des données en JS</h2>
                </header>
                <main>
                    <h3>Les cookies</h3>
                    <p>
                        <label>Cookie Value :</label>
                        <input type="text" id="cookieValue" value="" />
                    </p>
                    <p>
                        <button id="btnCookie">
                            Save Cookie value
                        </button>
                    </p>
                    <p>
                        <button id="btnClearCookieValue">
                            Clear cookie value
                        </button>
                    </p>
                    <p>
                        <button id="btnDeleteCookie">
                            Delete cookie
                        </button>
                    </p>
                    <p>
                        Actual cookie value : <span id="cookieValueSpan"></span>
                    </p>
                </main>
            </article>
        </section>
    </main>
    <footer>
        <div class="footer">
            <nav class="navFooter">
                
            </nav>
            <nav>
                <ul>
                    <li><a href="#" title="Conditions générales de vente">CGV</a></li>
                    <li><a href="#" title="Conditions générales d'utilisation">CGU</a></li>
                    <li><a href="#" title="Réglement général sur la protection des données">RGPD</a></li>
                </ul>
            </nav>
            <nav>
                <ul>
                    <li><a href="#" title="Notre équipe">Qui sommes-nous !</a></li>
                    <li><a href="#" title="Nos valeurs">Valeurs</a></li>
                    <li><a href="#" title="Expression de la gratuité">Pigeons</a></li>
                </ul>
            </nav>
        </div>

    </footer>
</body>

</html>